{
  "version": 4,
  "terraform_version": "1.10.3",
  "serial": 242,
  "lineage": "f902c87c-431a-b942-7853-bb3a8aec6bed",
  "outputs": {},
  "resources": [
    {
      "mode": "data",
      "type": "aws_instance",
      "name": "selected",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "i-0a31b91cafb664f5a",
          "schema_version": 0,
          "attributes": {
            "ami": "ami-062f0cc54dbfd8ef1",
            "arn": "arn:aws:ec2:ap-south-1:209479307317:instance/i-0a31b91cafb664f5a",
            "associate_public_ip_address": true,
            "availability_zone": "ap-south-1b",
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "filter": null,
            "get_password_data": false,
            "get_user_data": false,
            "host_id": "",
            "host_resource_group_arn": "",
            "iam_instance_profile": "",
            "id": "i-0a31b91cafb664f5a",
            "instance_id": "i-0a31b91cafb664f5a",
            "instance_state": "running",
            "instance_tags": null,
            "instance_type": "t2.micro",
            "ipv6_addresses": [],
            "key_name": "CW",
            "launch_time": "2025-05-09T04:12:12Z",
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 2,
                "http_tokens": "required",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface_id": "eni-0b1167542fb36139f",
            "outpost_arn": "",
            "password_data": null,
            "placement_group": "",
            "placement_partition_number": 0,
            "private_dns": "ip-172-31-15-26.ap-south-1.compute.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": true,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "172.31.15.26",
            "public_dns": "ec2-13-203-101-210.ap-south-1.compute.amazonaws.com",
            "public_ip": "13.203.101.210",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": false,
                "iops": 3000,
                "kms_key_id": "",
                "tags": {},
                "throughput": 125,
                "volume_id": "vol-06d5a2628317d428f",
                "volume_size": 8,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [
              "launch-wizard-3"
            ],
            "source_dest_check": true,
            "subnet_id": "subnet-0d00d408044ad6606",
            "tags": {
              "Name": "web2"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": null,
            "user_data_base64": null,
            "vpc_security_group_ids": [
              "sg-0fd84d540bef7a3ca"
            ]
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "i-0b34854c3b5df8dbb",
          "schema_version": 0,
          "attributes": {
            "ami": "ami-0e35ddab05955cf57",
            "arn": "arn:aws:ec2:ap-south-1:209479307317:instance/i-0b34854c3b5df8dbb",
            "associate_public_ip_address": true,
            "availability_zone": "ap-south-1b",
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "filter": null,
            "get_password_data": false,
            "get_user_data": false,
            "host_id": "",
            "host_resource_group_arn": "",
            "iam_instance_profile": "Ec2_CloudWatchAgentRole",
            "id": "i-0b34854c3b5df8dbb",
            "instance_id": "i-0b34854c3b5df8dbb",
            "instance_state": "running",
            "instance_tags": null,
            "instance_type": "t2.micro",
            "ipv6_addresses": [],
            "key_name": "CW",
            "launch_time": "2025-05-09T04:12:12Z",
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 2,
                "http_tokens": "required",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": true,
            "network_interface_id": "eni-01d5f8ea78b5c0f84",
            "outpost_arn": "",
            "password_data": null,
            "placement_group": "",
            "placement_partition_number": 0,
            "private_dns": "ip-172-31-4-54.ap-south-1.compute.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": true,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "172.31.4.54",
            "public_dns": "ec2-13-232-204-108.ap-south-1.compute.amazonaws.com",
            "public_ip": "13.232.204.108",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": false,
                "iops": 3000,
                "kms_key_id": "",
                "tags": {},
                "throughput": 125,
                "volume_id": "vol-0e80dfad35b5a8094",
                "volume_size": 8,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [
              "launch-wizard-1"
            ],
            "source_dest_check": true,
            "subnet_id": "subnet-0d00d408044ad6606",
            "tags": {
              "Name": "cloudwatch"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": null,
            "user_data_base64": null,
            "vpc_security_group_ids": [
              "sg-07fc845150d384b3f"
            ]
          },
          "sensitive_attributes": []
        },
        {
          "index_key": "i-0d04ea2c33123ddc7",
          "schema_version": 0,
          "attributes": {
            "ami": "ami-062f0cc54dbfd8ef1",
            "arn": "arn:aws:ec2:ap-south-1:209479307317:instance/i-0d04ea2c33123ddc7",
            "associate_public_ip_address": true,
            "availability_zone": "ap-south-1b",
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_stop": false,
            "disable_api_termination": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "filter": null,
            "get_password_data": false,
            "get_user_data": false,
            "host_id": "",
            "host_resource_group_arn": "",
            "iam_instance_profile": "",
            "id": "i-0d04ea2c33123ddc7",
            "instance_id": "i-0d04ea2c33123ddc7",
            "instance_state": "running",
            "instance_tags": null,
            "instance_type": "t2.micro",
            "ipv6_addresses": [],
            "key_name": "CW",
            "launch_time": "2025-05-09T04:12:12Z",
            "maintenance_options": [
              {
                "auto_recovery": "default"
              }
            ],
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_protocol_ipv6": "disabled",
                "http_put_response_hop_limit": 2,
                "http_tokens": "required",
                "instance_metadata_tags": "disabled"
              }
            ],
            "monitoring": false,
            "network_interface_id": "eni-050e7a5583f906922",
            "outpost_arn": "",
            "password_data": null,
            "placement_group": "",
            "placement_partition_number": 0,
            "private_dns": "ip-172-31-4-93.ap-south-1.compute.internal",
            "private_dns_name_options": [
              {
                "enable_resource_name_dns_a_record": true,
                "enable_resource_name_dns_aaaa_record": false,
                "hostname_type": "ip-name"
              }
            ],
            "private_ip": "172.31.4.93",
            "public_dns": "ec2-13-232-199-206.ap-south-1.compute.amazonaws.com",
            "public_ip": "13.232.199.206",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/xvda",
                "encrypted": false,
                "iops": 3000,
                "kms_key_id": "",
                "tags": {},
                "throughput": 125,
                "volume_id": "vol-01f909d27abeea8c2",
                "volume_size": 8,
                "volume_type": "gp3"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [
              "launch-wizard-2"
            ],
            "source_dest_check": true,
            "subnet_id": "subnet-0d00d408044ad6606",
            "tags": {
              "Name": "web1"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": null,
            "user_data_base64": null,
            "vpc_security_group_ids": [
              "sg-035d79a13113dd190"
            ]
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "data",
      "type": "aws_instances",
      "name": "selected",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filter": null,
            "id": "ap-south-1",
            "ids": [
              "i-0b34854c3b5df8dbb",
              "i-0a31b91cafb664f5a",
              "i-0d04ea2c33123ddc7"
            ],
            "instance_state_names": [
              "running",
              "stopped"
            ],
            "instance_tags": null,
            "ipv6_addresses": [],
            "private_ips": [
              "172.31.4.54",
              "172.31.15.26",
              "172.31.4.93"
            ],
            "public_ips": [
              "13.232.204.108",
              "13.203.101.210",
              "13.232.199.206"
            ],
            "timeouts": null
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ssm_association",
      "name": "cw_agent_configure",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "i-0a31b91cafb664f5a",
          "schema_version": 1,
          "attributes": {
            "apply_only_at_cron_interval": false,
            "arn": "arn:aws:ssm:ap-south-1:209479307317:association/cb7dd5df-b4d4-47cd-bd14-c3a5a4ff29c3",
            "association_id": "cb7dd5df-b4d4-47cd-bd14-c3a5a4ff29c3",
            "association_name": "",
            "automation_target_parameter_name": "",
            "compliance_severity": "HIGH",
            "document_version": "$DEFAULT",
            "id": "cb7dd5df-b4d4-47cd-bd14-c3a5a4ff29c3",
            "instance_id": "",
            "max_concurrency": "",
            "max_errors": "",
            "name": "AmazonCloudWatch-ManageAgent",
            "output_location": [],
            "parameters": {
              "action": "configure",
              "mode": "ec2",
              "optionalConfigurationLocation": "/cloudwatch-agent/config",
              "optionalConfigurationSource": "ssm",
              "optionalRestart": "yes"
            },
            "schedule_expression": "rate(1 day)",
            "sync_compliance": "",
            "tags": {},
            "tags_all": {},
            "targets": [
              {
                "key": "InstanceIds",
                "values": [
                  "i-0a31b91cafb664f5a"
                ]
              }
            ],
            "wait_for_success_timeout_seconds": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0b34854c3b5df8dbb",
          "schema_version": 1,
          "attributes": {
            "apply_only_at_cron_interval": false,
            "arn": "arn:aws:ssm:ap-south-1:209479307317:association/36001d30-9ea3-4d8d-8de1-ffa4a3e5e8c0",
            "association_id": "36001d30-9ea3-4d8d-8de1-ffa4a3e5e8c0",
            "association_name": "",
            "automation_target_parameter_name": "",
            "compliance_severity": "HIGH",
            "document_version": "$DEFAULT",
            "id": "36001d30-9ea3-4d8d-8de1-ffa4a3e5e8c0",
            "instance_id": "",
            "max_concurrency": "",
            "max_errors": "",
            "name": "AmazonCloudWatch-ManageAgent",
            "output_location": [],
            "parameters": {
              "action": "configure",
              "mode": "ec2",
              "optionalConfigurationLocation": "/cloudwatch-agent/config",
              "optionalConfigurationSource": "ssm",
              "optionalRestart": "yes"
            },
            "schedule_expression": "rate(1 day)",
            "sync_compliance": "",
            "tags": {},
            "tags_all": {},
            "targets": [
              {
                "key": "InstanceIds",
                "values": [
                  "i-0b34854c3b5df8dbb"
                ]
              }
            ],
            "wait_for_success_timeout_seconds": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0d04ea2c33123ddc7",
          "schema_version": 1,
          "attributes": {
            "apply_only_at_cron_interval": false,
            "arn": "arn:aws:ssm:ap-south-1:209479307317:association/b076e39e-5b9d-4011-9879-2f57c4f1549f",
            "association_id": "b076e39e-5b9d-4011-9879-2f57c4f1549f",
            "association_name": "",
            "automation_target_parameter_name": "",
            "compliance_severity": "HIGH",
            "document_version": "$DEFAULT",
            "id": "b076e39e-5b9d-4011-9879-2f57c4f1549f",
            "instance_id": "",
            "max_concurrency": "",
            "max_errors": "",
            "name": "AmazonCloudWatch-ManageAgent",
            "output_location": [],
            "parameters": {
              "action": "configure",
              "mode": "ec2",
              "optionalConfigurationLocation": "/cloudwatch-agent/config",
              "optionalConfigurationSource": "ssm",
              "optionalRestart": "yes"
            },
            "schedule_expression": "rate(1 day)",
            "sync_compliance": "",
            "tags": {},
            "tags_all": {},
            "targets": [
              {
                "key": "InstanceIds",
                "values": [
                  "i-0d04ea2c33123ddc7"
                ]
              }
            ],
            "wait_for_success_timeout_seconds": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ssm_association",
      "name": "install_ssm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "i-0a31b91cafb664f5a",
          "schema_version": 1,
          "attributes": {
            "apply_only_at_cron_interval": false,
            "arn": "arn:aws:ssm:ap-south-1:209479307317:association/4d717035-a7f7-4e99-a7b4-fa319f764e9b",
            "association_id": "4d717035-a7f7-4e99-a7b4-fa319f764e9b",
            "association_name": "",
            "automation_target_parameter_name": "",
            "compliance_severity": "",
            "document_version": "$DEFAULT",
            "id": "4d717035-a7f7-4e99-a7b4-fa319f764e9b",
            "instance_id": "",
            "max_concurrency": "",
            "max_errors": "",
            "name": "InstallSSMAgent",
            "output_location": [],
            "parameters": {},
            "schedule_expression": "",
            "sync_compliance": "",
            "tags": {},
            "tags_all": {},
            "targets": [
              {
                "key": "InstanceIds",
                "values": [
                  "i-0a31b91cafb664f5a"
                ]
              }
            ],
            "wait_for_success_timeout_seconds": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_ssm_document.install_ssm_agent",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0b34854c3b5df8dbb",
          "schema_version": 1,
          "attributes": {
            "apply_only_at_cron_interval": false,
            "arn": "arn:aws:ssm:ap-south-1:209479307317:association/ec530c8a-5c16-4b72-8596-e05eadd1e361",
            "association_id": "ec530c8a-5c16-4b72-8596-e05eadd1e361",
            "association_name": "",
            "automation_target_parameter_name": "",
            "compliance_severity": "",
            "document_version": "$DEFAULT",
            "id": "ec530c8a-5c16-4b72-8596-e05eadd1e361",
            "instance_id": "",
            "max_concurrency": "",
            "max_errors": "",
            "name": "InstallSSMAgent",
            "output_location": [],
            "parameters": {},
            "schedule_expression": "",
            "sync_compliance": "",
            "tags": {},
            "tags_all": {},
            "targets": [
              {
                "key": "InstanceIds",
                "values": [
                  "i-0b34854c3b5df8dbb"
                ]
              }
            ],
            "wait_for_success_timeout_seconds": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_ssm_document.install_ssm_agent",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0d04ea2c33123ddc7",
          "schema_version": 1,
          "attributes": {
            "apply_only_at_cron_interval": false,
            "arn": "arn:aws:ssm:ap-south-1:209479307317:association/242ef058-f271-4e62-bcd1-921196ea9f7e",
            "association_id": "242ef058-f271-4e62-bcd1-921196ea9f7e",
            "association_name": "",
            "automation_target_parameter_name": "",
            "compliance_severity": "",
            "document_version": "$DEFAULT",
            "id": "242ef058-f271-4e62-bcd1-921196ea9f7e",
            "instance_id": "",
            "max_concurrency": "",
            "max_errors": "",
            "name": "InstallSSMAgent",
            "output_location": [],
            "parameters": {},
            "schedule_expression": "",
            "sync_compliance": "",
            "tags": {},
            "tags_all": {},
            "targets": [
              {
                "key": "InstanceIds",
                "values": [
                  "i-0d04ea2c33123ddc7"
                ]
              }
            ],
            "wait_for_success_timeout_seconds": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "aws_ssm_document.install_ssm_agent",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "mode": "managed",
      "type": "aws_ssm_document",
      "name": "install_ssm_agent",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:ap-south-1:209479307317:document/InstallSSMAgent",
            "attachments_source": [],
            "content": "{\"description\":\"Install and start the SSM Agent\",\"mainSteps\":[{\"action\":\"aws:runShellScript\",\"inputs\":{\"runCommand\":[\"#!/bin/bash\",\"if [ -f /etc/system-release ]; then\",\"  yum install -y amazon-ssm-agent\",\"  systemctl enable amazon-ssm-agent\",\"  systemctl start amazon-ssm-agent\",\"elif [ -f /etc/debian_version ]; then\",\"  snap install amazon-ssm-agent --classic\",\"  systemctl enable snap.amazon-ssm-agent.amazon-ssm-agent.service\",\"  systemctl start snap.amazon-ssm-agent.amazon-ssm-agent.service\",\"fi\"]},\"name\":\"installSSMAgent\"}],\"schemaVersion\":\"2.2\"}",
            "created_date": "2025-05-09T04:28:51Z",
            "default_version": "1",
            "description": "Install and start the SSM Agent",
            "document_format": "JSON",
            "document_type": "Command",
            "document_version": "1",
            "hash": "19ca4b5068b05befd3632a6ad94bf04ca51d667785a711ca18e1fac3caa6295a",
            "hash_type": "Sha256",
            "id": "InstallSSMAgent",
            "latest_version": "1",
            "name": "InstallSSMAgent",
            "owner": "209479307317",
            "parameter": [],
            "permissions": {},
            "platform_types": [
              "Linux",
              "MacOS"
            ],
            "schema_version": "2.2",
            "status": "Active",
            "tags": {},
            "tags_all": {},
            "target_type": "",
            "version_name": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"cloudwatch\"]",
      "mode": "data",
      "type": "template_file",
      "name": "agent_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "06f278d0fcb0df3b3899934a8ce80159043528aba3cd3eea455bfc0255effa5c",
            "rendered": "{\n  \"agent\": {\n    \"metrics_collection_interval\": 60,\n    \"run_as_user\": \"root\"\n  },\n  \"logs\": {\n    \"logs_collected\": {\n      \"files\": {\n        \"collect_list\": [\n          {\n            \"file_path\": \"/var/log/messages\",\n            \"log_group_name\": \"my-cloudwatch-log-group-i-0b34854c3b5df8dbb\",\n            \"log_stream_name\": \"i-0b34854c3b5df8dbb\",\n            \"timestamp_format\": \"%b %d %H:%M:%S\",\n            \"timezone\": \"UTC\"\n          }\n        ]\n      }\n    }\n  },\n  \"metrics\": {\n    \"namespace\": \"CWAgent\",\n    \"append_dimensions\": {\n      \"InstanceId\": \"${aws:InstanceId}\"\n    },\n    \"metrics_collected\": {\n      \"mem\": {\n        \"measurement\": [\"mem_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"swap\": {\n        \"measurement\": [\"swap_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"disk\": {\n        \"resources\": [\"/\"],\n        \"measurement\": [\"used_percent\"],\n        \"metrics_collection_interval\": 60,\n        \"ignore_file_system_types\": [\"sysfs\", \"devtmpfs\"]\n      },\n      \"cpu\": {\n        \"measurement\": [\"cpu_usage_idle\", \"cpu_usage_iowait\"],\n        \"metrics_collection_interval\": 60,\n        \"totalcpu\": true\n      }\n    }\n  }\n}\n",
            "template": "{\n  \"agent\": {\n    \"metrics_collection_interval\": 60,\n    \"run_as_user\": \"root\"\n  },\n  \"logs\": {\n    \"logs_collected\": {\n      \"files\": {\n        \"collect_list\": [\n          {\n            \"file_path\": \"/var/log/messages\",\n            \"log_group_name\": \"${log_group_name}\",\n            \"log_stream_name\": \"${instance_id}\",\n            \"timestamp_format\": \"%b %d %H:%M:%S\",\n            \"timezone\": \"UTC\"\n          }\n        ]\n      }\n    }\n  },\n  \"metrics\": {\n    \"namespace\": \"CWAgent\",\n    \"append_dimensions\": {\n      \"InstanceId\": \"$${aws:InstanceId}\"\n    },\n    \"metrics_collected\": {\n      \"mem\": {\n        \"measurement\": [\"mem_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"swap\": {\n        \"measurement\": [\"swap_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"disk\": {\n        \"resources\": [\"/\"],\n        \"measurement\": [\"used_percent\"],\n        \"metrics_collection_interval\": 60,\n        \"ignore_file_system_types\": [\"sysfs\", \"devtmpfs\"]\n      },\n      \"cpu\": {\n        \"measurement\": [\"cpu_usage_idle\", \"cpu_usage_iowait\"],\n        \"metrics_collection_interval\": 60,\n        \"totalcpu\": true\n      }\n    }\n  }\n}\n",
            "vars": {
              "instance_id": "i-0b34854c3b5df8dbb",
              "log_group_name": "my-cloudwatch-log-group-i-0b34854c3b5df8dbb",
              "region": "ap-south-1"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"cloudwatch\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "cw_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:ap-south-1:209479307317:log-group:my-cloudwatch-log-group-i-0b34854c3b5df8dbb",
            "id": "my-cloudwatch-log-group-i-0b34854c3b5df8dbb",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "my-cloudwatch-log-group-i-0b34854c3b5df8dbb",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"cloudwatch\"]",
      "mode": "managed",
      "type": "aws_ssm_association",
      "name": "start_agent",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "apply_only_at_cron_interval": false,
            "arn": "arn:aws:ssm:ap-south-1:209479307317:association/b70878ff-7738-40b4-819c-170120463e3a",
            "association_id": "b70878ff-7738-40b4-819c-170120463e3a",
            "association_name": "",
            "automation_target_parameter_name": "",
            "compliance_severity": "",
            "document_version": "$DEFAULT",
            "id": "b70878ff-7738-40b4-819c-170120463e3a",
            "instance_id": "",
            "max_concurrency": "",
            "max_errors": "",
            "name": "InstallCloudWatchAgent-i-0b34854c3b5df8dbb",
            "output_location": [],
            "parameters": {},
            "schedule_expression": "",
            "sync_compliance": "",
            "tags": {},
            "tags_all": {},
            "targets": [
              {
                "key": "InstanceIds",
                "values": [
                  "i-0b34854c3b5df8dbb"
                ]
              }
            ],
            "wait_for_success_timeout_seconds": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.cloudwatch_agent.aws_cloudwatch_log_group.cw_logs",
            "module.cloudwatch_agent.aws_ssm_document.install_cw_agent",
            "module.cloudwatch_agent.aws_ssm_parameter.cw_agent_config",
            "module.cloudwatch_agent.data.template_file.agent_config"
          ]
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"cloudwatch\"]",
      "mode": "managed",
      "type": "aws_ssm_document",
      "name": "install_cw_agent",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:ap-south-1:209479307317:document/InstallCloudWatchAgent-i-0b34854c3b5df8dbb",
            "attachments_source": [],
            "content": "{\"description\":\"Install and start CloudWatch Agent via Terraform\",\"mainSteps\":[{\"action\":\"aws:runShellScript\",\"inputs\":{\"runCommand\":[\"sudo snap remove amazon-ssm-agent || true\",\"sudo snap install amazon-ssm-agent --classic || true\",\"sudo systemctl enable amazon-ssm-agent\",\"sudo systemctl start amazon-ssm-agent\",\"sudo yum install -y amazon-cloudwatch-agent || sudo apt-get install -y amazon-cloudwatch-agent\",\"/opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -c ssm:/cloudwatch-agent/config-i-0b34854c3b5df8dbb -s\"]},\"name\":\"InstallAgent\"}],\"schemaVersion\":\"2.2\"}",
            "created_date": "2025-05-09T05:14:09Z",
            "default_version": "2",
            "description": "Install and start CloudWatch Agent via Terraform",
            "document_format": "JSON",
            "document_type": "Command",
            "document_version": "2",
            "hash": "016dc68d45083e29c26c70554a76612fc643e2a047d8c954da6154ef5690259f",
            "hash_type": "Sha256",
            "id": "InstallCloudWatchAgent-i-0b34854c3b5df8dbb",
            "latest_version": "2",
            "name": "InstallCloudWatchAgent-i-0b34854c3b5df8dbb",
            "owner": "209479307317",
            "parameter": [],
            "permissions": {},
            "platform_types": [
              "Linux",
              "MacOS"
            ],
            "schema_version": "2.2",
            "status": "Active",
            "tags": {},
            "tags_all": {},
            "target_type": "",
            "version_name": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"cloudwatch\"]",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "cw_agent_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allowed_pattern": "",
            "arn": "arn:aws:ssm:ap-south-1:209479307317:parameter/cloudwatch-agent/config-i-0b34854c3b5df8dbb",
            "data_type": "text",
            "description": "",
            "has_value_wo": null,
            "id": "/cloudwatch-agent/config-i-0b34854c3b5df8dbb",
            "insecure_value": null,
            "key_id": "",
            "name": "/cloudwatch-agent/config-i-0b34854c3b5df8dbb",
            "overwrite": true,
            "tags": {},
            "tags_all": {},
            "tier": "Standard",
            "type": "String",
            "value": "{\n  \"agent\": {\n    \"metrics_collection_interval\": 60,\n    \"run_as_user\": \"root\"\n  },\n  \"logs\": {\n    \"logs_collected\": {\n      \"files\": {\n        \"collect_list\": [\n          {\n            \"file_path\": \"/var/log/messages\",\n            \"log_group_name\": \"my-cloudwatch-log-group-i-0b34854c3b5df8dbb\",\n            \"log_stream_name\": \"i-0b34854c3b5df8dbb\",\n            \"timestamp_format\": \"%b %d %H:%M:%S\",\n            \"timezone\": \"UTC\"\n          }\n        ]\n      }\n    }\n  },\n  \"metrics\": {\n    \"namespace\": \"CWAgent\",\n    \"append_dimensions\": {\n      \"InstanceId\": \"${aws:InstanceId}\"\n    },\n    \"metrics_collected\": {\n      \"mem\": {\n        \"measurement\": [\"mem_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"swap\": {\n        \"measurement\": [\"swap_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"disk\": {\n        \"resources\": [\"/\"],\n        \"measurement\": [\"used_percent\"],\n        \"metrics_collection_interval\": 60,\n        \"ignore_file_system_types\": [\"sysfs\", \"devtmpfs\"]\n      },\n      \"cpu\": {\n        \"measurement\": [\"cpu_usage_idle\", \"cpu_usage_iowait\"],\n        \"metrics_collection_interval\": 60,\n        \"totalcpu\": true\n      }\n    }\n  }\n}\n",
            "value_wo": null,
            "value_wo_version": null,
            "version": 1
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "value_wo"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "value"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.cloudwatch_agent.data.template_file.agent_config"
          ]
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"web1\"]",
      "mode": "data",
      "type": "template_file",
      "name": "agent_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "0dcb75643aa08fd85c36ac92c5a65601595c85d50f0f250b4c35fd6e170856e1",
            "rendered": "{\n  \"agent\": {\n    \"metrics_collection_interval\": 60,\n    \"run_as_user\": \"root\"\n  },\n  \"logs\": {\n    \"logs_collected\": {\n      \"files\": {\n        \"collect_list\": [\n          {\n            \"file_path\": \"/var/log/messages\",\n            \"log_group_name\": \"my-cloudwatch-log-group-i-0d04ea2c33123ddc7\",\n            \"log_stream_name\": \"i-0d04ea2c33123ddc7\",\n            \"timestamp_format\": \"%b %d %H:%M:%S\",\n            \"timezone\": \"UTC\"\n          }\n        ]\n      }\n    }\n  },\n  \"metrics\": {\n    \"namespace\": \"CWAgent\",\n    \"append_dimensions\": {\n      \"InstanceId\": \"${aws:InstanceId}\"\n    },\n    \"metrics_collected\": {\n      \"mem\": {\n        \"measurement\": [\"mem_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"swap\": {\n        \"measurement\": [\"swap_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"disk\": {\n        \"resources\": [\"/\"],\n        \"measurement\": [\"used_percent\"],\n        \"metrics_collection_interval\": 60,\n        \"ignore_file_system_types\": [\"sysfs\", \"devtmpfs\"]\n      },\n      \"cpu\": {\n        \"measurement\": [\"cpu_usage_idle\", \"cpu_usage_iowait\"],\n        \"metrics_collection_interval\": 60,\n        \"totalcpu\": true\n      }\n    }\n  }\n}\n",
            "template": "{\n  \"agent\": {\n    \"metrics_collection_interval\": 60,\n    \"run_as_user\": \"root\"\n  },\n  \"logs\": {\n    \"logs_collected\": {\n      \"files\": {\n        \"collect_list\": [\n          {\n            \"file_path\": \"/var/log/messages\",\n            \"log_group_name\": \"${log_group_name}\",\n            \"log_stream_name\": \"${instance_id}\",\n            \"timestamp_format\": \"%b %d %H:%M:%S\",\n            \"timezone\": \"UTC\"\n          }\n        ]\n      }\n    }\n  },\n  \"metrics\": {\n    \"namespace\": \"CWAgent\",\n    \"append_dimensions\": {\n      \"InstanceId\": \"$${aws:InstanceId}\"\n    },\n    \"metrics_collected\": {\n      \"mem\": {\n        \"measurement\": [\"mem_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"swap\": {\n        \"measurement\": [\"swap_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"disk\": {\n        \"resources\": [\"/\"],\n        \"measurement\": [\"used_percent\"],\n        \"metrics_collection_interval\": 60,\n        \"ignore_file_system_types\": [\"sysfs\", \"devtmpfs\"]\n      },\n      \"cpu\": {\n        \"measurement\": [\"cpu_usage_idle\", \"cpu_usage_iowait\"],\n        \"metrics_collection_interval\": 60,\n        \"totalcpu\": true\n      }\n    }\n  }\n}\n",
            "vars": {
              "instance_id": "i-0d04ea2c33123ddc7",
              "log_group_name": "my-cloudwatch-log-group-i-0d04ea2c33123ddc7",
              "region": "ap-south-1"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"web1\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "cw_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:ap-south-1:209479307317:log-group:my-cloudwatch-log-group-i-0d04ea2c33123ddc7",
            "id": "my-cloudwatch-log-group-i-0d04ea2c33123ddc7",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "my-cloudwatch-log-group-i-0d04ea2c33123ddc7",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"web1\"]",
      "mode": "managed",
      "type": "aws_ssm_association",
      "name": "start_agent",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "apply_only_at_cron_interval": false,
            "arn": "arn:aws:ssm:ap-south-1:209479307317:association/196c2ab6-8aed-421c-a0f3-8de81cfb55b2",
            "association_id": "196c2ab6-8aed-421c-a0f3-8de81cfb55b2",
            "association_name": "",
            "automation_target_parameter_name": "",
            "compliance_severity": "",
            "document_version": "$DEFAULT",
            "id": "196c2ab6-8aed-421c-a0f3-8de81cfb55b2",
            "instance_id": "",
            "max_concurrency": "",
            "max_errors": "",
            "name": "InstallCloudWatchAgent-i-0d04ea2c33123ddc7",
            "output_location": [],
            "parameters": {},
            "schedule_expression": "",
            "sync_compliance": "",
            "tags": {},
            "tags_all": {},
            "targets": [
              {
                "key": "InstanceIds",
                "values": [
                  "i-0d04ea2c33123ddc7"
                ]
              }
            ],
            "wait_for_success_timeout_seconds": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.cloudwatch_agent.aws_cloudwatch_log_group.cw_logs",
            "module.cloudwatch_agent.aws_ssm_document.install_cw_agent",
            "module.cloudwatch_agent.aws_ssm_parameter.cw_agent_config",
            "module.cloudwatch_agent.data.template_file.agent_config"
          ]
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"web1\"]",
      "mode": "managed",
      "type": "aws_ssm_document",
      "name": "install_cw_agent",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:ap-south-1:209479307317:document/InstallCloudWatchAgent-i-0d04ea2c33123ddc7",
            "attachments_source": [],
            "content": "{\"description\":\"Install and start CloudWatch Agent via Terraform\",\"mainSteps\":[{\"action\":\"aws:runShellScript\",\"inputs\":{\"runCommand\":[\"sudo snap remove amazon-ssm-agent || true\",\"sudo snap install amazon-ssm-agent --classic || true\",\"sudo systemctl enable amazon-ssm-agent\",\"sudo systemctl start amazon-ssm-agent\",\"sudo yum install -y amazon-cloudwatch-agent || sudo apt-get install -y amazon-cloudwatch-agent\",\"/opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -c ssm:/cloudwatch-agent/config-i-0d04ea2c33123ddc7 -s\"]},\"name\":\"InstallAgent\"}],\"schemaVersion\":\"2.2\"}",
            "created_date": "2025-05-09T05:14:09Z",
            "default_version": "2",
            "description": "Install and start CloudWatch Agent via Terraform",
            "document_format": "JSON",
            "document_type": "Command",
            "document_version": "2",
            "hash": "b3df94f87864a470b93148a76f6afc1b38672a7a857b0c2446dde9902583cf2e",
            "hash_type": "Sha256",
            "id": "InstallCloudWatchAgent-i-0d04ea2c33123ddc7",
            "latest_version": "2",
            "name": "InstallCloudWatchAgent-i-0d04ea2c33123ddc7",
            "owner": "209479307317",
            "parameter": [],
            "permissions": {},
            "platform_types": [
              "Linux",
              "MacOS"
            ],
            "schema_version": "2.2",
            "status": "Active",
            "tags": {},
            "tags_all": {},
            "target_type": "",
            "version_name": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"web1\"]",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "cw_agent_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allowed_pattern": "",
            "arn": "arn:aws:ssm:ap-south-1:209479307317:parameter/cloudwatch-agent/config-i-0d04ea2c33123ddc7",
            "data_type": "text",
            "description": "",
            "has_value_wo": null,
            "id": "/cloudwatch-agent/config-i-0d04ea2c33123ddc7",
            "insecure_value": null,
            "key_id": "",
            "name": "/cloudwatch-agent/config-i-0d04ea2c33123ddc7",
            "overwrite": true,
            "tags": {},
            "tags_all": {},
            "tier": "Standard",
            "type": "String",
            "value": "{\n  \"agent\": {\n    \"metrics_collection_interval\": 60,\n    \"run_as_user\": \"root\"\n  },\n  \"logs\": {\n    \"logs_collected\": {\n      \"files\": {\n        \"collect_list\": [\n          {\n            \"file_path\": \"/var/log/messages\",\n            \"log_group_name\": \"my-cloudwatch-log-group-i-0d04ea2c33123ddc7\",\n            \"log_stream_name\": \"i-0d04ea2c33123ddc7\",\n            \"timestamp_format\": \"%b %d %H:%M:%S\",\n            \"timezone\": \"UTC\"\n          }\n        ]\n      }\n    }\n  },\n  \"metrics\": {\n    \"namespace\": \"CWAgent\",\n    \"append_dimensions\": {\n      \"InstanceId\": \"${aws:InstanceId}\"\n    },\n    \"metrics_collected\": {\n      \"mem\": {\n        \"measurement\": [\"mem_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"swap\": {\n        \"measurement\": [\"swap_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"disk\": {\n        \"resources\": [\"/\"],\n        \"measurement\": [\"used_percent\"],\n        \"metrics_collection_interval\": 60,\n        \"ignore_file_system_types\": [\"sysfs\", \"devtmpfs\"]\n      },\n      \"cpu\": {\n        \"measurement\": [\"cpu_usage_idle\", \"cpu_usage_iowait\"],\n        \"metrics_collection_interval\": 60,\n        \"totalcpu\": true\n      }\n    }\n  }\n}\n",
            "value_wo": null,
            "value_wo_version": null,
            "version": 1
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "value_wo"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "value"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.cloudwatch_agent.data.template_file.agent_config"
          ]
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"web2\"]",
      "mode": "data",
      "type": "template_file",
      "name": "agent_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "0ee4594dea8bb710d16a8fb6f436e7750d57242f26b253045ba8990e1c77f9d0",
            "rendered": "{\n  \"agent\": {\n    \"metrics_collection_interval\": 60,\n    \"run_as_user\": \"root\"\n  },\n  \"logs\": {\n    \"logs_collected\": {\n      \"files\": {\n        \"collect_list\": [\n          {\n            \"file_path\": \"/var/log/messages\",\n            \"log_group_name\": \"my-cloudwatch-log-group-i-0a31b91cafb664f5a\",\n            \"log_stream_name\": \"i-0a31b91cafb664f5a\",\n            \"timestamp_format\": \"%b %d %H:%M:%S\",\n            \"timezone\": \"UTC\"\n          }\n        ]\n      }\n    }\n  },\n  \"metrics\": {\n    \"namespace\": \"CWAgent\",\n    \"append_dimensions\": {\n      \"InstanceId\": \"${aws:InstanceId}\"\n    },\n    \"metrics_collected\": {\n      \"mem\": {\n        \"measurement\": [\"mem_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"swap\": {\n        \"measurement\": [\"swap_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"disk\": {\n        \"resources\": [\"/\"],\n        \"measurement\": [\"used_percent\"],\n        \"metrics_collection_interval\": 60,\n        \"ignore_file_system_types\": [\"sysfs\", \"devtmpfs\"]\n      },\n      \"cpu\": {\n        \"measurement\": [\"cpu_usage_idle\", \"cpu_usage_iowait\"],\n        \"metrics_collection_interval\": 60,\n        \"totalcpu\": true\n      }\n    }\n  }\n}\n",
            "template": "{\n  \"agent\": {\n    \"metrics_collection_interval\": 60,\n    \"run_as_user\": \"root\"\n  },\n  \"logs\": {\n    \"logs_collected\": {\n      \"files\": {\n        \"collect_list\": [\n          {\n            \"file_path\": \"/var/log/messages\",\n            \"log_group_name\": \"${log_group_name}\",\n            \"log_stream_name\": \"${instance_id}\",\n            \"timestamp_format\": \"%b %d %H:%M:%S\",\n            \"timezone\": \"UTC\"\n          }\n        ]\n      }\n    }\n  },\n  \"metrics\": {\n    \"namespace\": \"CWAgent\",\n    \"append_dimensions\": {\n      \"InstanceId\": \"$${aws:InstanceId}\"\n    },\n    \"metrics_collected\": {\n      \"mem\": {\n        \"measurement\": [\"mem_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"swap\": {\n        \"measurement\": [\"swap_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"disk\": {\n        \"resources\": [\"/\"],\n        \"measurement\": [\"used_percent\"],\n        \"metrics_collection_interval\": 60,\n        \"ignore_file_system_types\": [\"sysfs\", \"devtmpfs\"]\n      },\n      \"cpu\": {\n        \"measurement\": [\"cpu_usage_idle\", \"cpu_usage_iowait\"],\n        \"metrics_collection_interval\": 60,\n        \"totalcpu\": true\n      }\n    }\n  }\n}\n",
            "vars": {
              "instance_id": "i-0a31b91cafb664f5a",
              "log_group_name": "my-cloudwatch-log-group-i-0a31b91cafb664f5a",
              "region": "ap-south-1"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"web2\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_log_group",
      "name": "cw_logs",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:logs:ap-south-1:209479307317:log-group:my-cloudwatch-log-group-i-0a31b91cafb664f5a",
            "id": "my-cloudwatch-log-group-i-0a31b91cafb664f5a",
            "kms_key_id": "",
            "log_group_class": "STANDARD",
            "name": "my-cloudwatch-log-group-i-0a31b91cafb664f5a",
            "name_prefix": "",
            "retention_in_days": 14,
            "skip_destroy": false,
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"web2\"]",
      "mode": "managed",
      "type": "aws_ssm_association",
      "name": "start_agent",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "apply_only_at_cron_interval": false,
            "arn": "arn:aws:ssm:ap-south-1:209479307317:association/95285a53-818c-4a6a-a103-164a0d4d1764",
            "association_id": "95285a53-818c-4a6a-a103-164a0d4d1764",
            "association_name": "",
            "automation_target_parameter_name": "",
            "compliance_severity": "",
            "document_version": "$DEFAULT",
            "id": "95285a53-818c-4a6a-a103-164a0d4d1764",
            "instance_id": "",
            "max_concurrency": "",
            "max_errors": "",
            "name": "InstallCloudWatchAgent-i-0a31b91cafb664f5a",
            "output_location": [],
            "parameters": {},
            "schedule_expression": "",
            "sync_compliance": "",
            "tags": {},
            "tags_all": {},
            "targets": [
              {
                "key": "InstanceIds",
                "values": [
                  "i-0a31b91cafb664f5a"
                ]
              }
            ],
            "wait_for_success_timeout_seconds": null
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.cloudwatch_agent.aws_cloudwatch_log_group.cw_logs",
            "module.cloudwatch_agent.aws_ssm_document.install_cw_agent",
            "module.cloudwatch_agent.aws_ssm_parameter.cw_agent_config",
            "module.cloudwatch_agent.data.template_file.agent_config"
          ]
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"web2\"]",
      "mode": "managed",
      "type": "aws_ssm_document",
      "name": "install_cw_agent",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ssm:ap-south-1:209479307317:document/InstallCloudWatchAgent-i-0a31b91cafb664f5a",
            "attachments_source": [],
            "content": "{\"description\":\"Install and start CloudWatch Agent via Terraform\",\"mainSteps\":[{\"action\":\"aws:runShellScript\",\"inputs\":{\"runCommand\":[\"sudo snap remove amazon-ssm-agent || true\",\"sudo snap install amazon-ssm-agent --classic || true\",\"sudo systemctl enable amazon-ssm-agent\",\"sudo systemctl start amazon-ssm-agent\",\"sudo yum install -y amazon-cloudwatch-agent || sudo apt-get install -y amazon-cloudwatch-agent\",\"/opt/aws/amazon-cloudwatch-agent/bin/amazon-cloudwatch-agent-ctl -a fetch-config -m ec2 -c ssm:/cloudwatch-agent/config-i-0a31b91cafb664f5a -s\"]},\"name\":\"InstallAgent\"}],\"schemaVersion\":\"2.2\"}",
            "created_date": "2025-05-09T05:14:09Z",
            "default_version": "2",
            "description": "Install and start CloudWatch Agent via Terraform",
            "document_format": "JSON",
            "document_type": "Command",
            "document_version": "2",
            "hash": "8a6f994aeef1998d3058768d0e5914ad0d460a6d97d652ef4a6e997ab14dea14",
            "hash_type": "Sha256",
            "id": "InstallCloudWatchAgent-i-0a31b91cafb664f5a",
            "latest_version": "2",
            "name": "InstallCloudWatchAgent-i-0a31b91cafb664f5a",
            "owner": "209479307317",
            "parameter": [],
            "permissions": {},
            "platform_types": [
              "Linux",
              "MacOS"
            ],
            "schema_version": "2.2",
            "status": "Active",
            "tags": {},
            "tags_all": {},
            "target_type": "",
            "version_name": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.cloudwatch_agent[\"web2\"]",
      "mode": "managed",
      "type": "aws_ssm_parameter",
      "name": "cw_agent_config",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allowed_pattern": "",
            "arn": "arn:aws:ssm:ap-south-1:209479307317:parameter/cloudwatch-agent/config-i-0a31b91cafb664f5a",
            "data_type": "text",
            "description": "",
            "has_value_wo": null,
            "id": "/cloudwatch-agent/config-i-0a31b91cafb664f5a",
            "insecure_value": null,
            "key_id": "",
            "name": "/cloudwatch-agent/config-i-0a31b91cafb664f5a",
            "overwrite": true,
            "tags": {},
            "tags_all": {},
            "tier": "Standard",
            "type": "String",
            "value": "{\n  \"agent\": {\n    \"metrics_collection_interval\": 60,\n    \"run_as_user\": \"root\"\n  },\n  \"logs\": {\n    \"logs_collected\": {\n      \"files\": {\n        \"collect_list\": [\n          {\n            \"file_path\": \"/var/log/messages\",\n            \"log_group_name\": \"my-cloudwatch-log-group-i-0a31b91cafb664f5a\",\n            \"log_stream_name\": \"i-0a31b91cafb664f5a\",\n            \"timestamp_format\": \"%b %d %H:%M:%S\",\n            \"timezone\": \"UTC\"\n          }\n        ]\n      }\n    }\n  },\n  \"metrics\": {\n    \"namespace\": \"CWAgent\",\n    \"append_dimensions\": {\n      \"InstanceId\": \"${aws:InstanceId}\"\n    },\n    \"metrics_collected\": {\n      \"mem\": {\n        \"measurement\": [\"mem_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"swap\": {\n        \"measurement\": [\"swap_used_percent\"],\n        \"metrics_collection_interval\": 60\n      },\n      \"disk\": {\n        \"resources\": [\"/\"],\n        \"measurement\": [\"used_percent\"],\n        \"metrics_collection_interval\": 60,\n        \"ignore_file_system_types\": [\"sysfs\", \"devtmpfs\"]\n      },\n      \"cpu\": {\n        \"measurement\": [\"cpu_usage_idle\", \"cpu_usage_iowait\"],\n        \"metrics_collection_interval\": 60,\n        \"totalcpu\": true\n      }\n    }\n  }\n}\n",
            "value_wo": null,
            "value_wo_version": null,
            "version": 1
          },
          "sensitive_attributes": [
            [
              {
                "type": "get_attr",
                "value": "value"
              }
            ],
            [
              {
                "type": "get_attr",
                "value": "value_wo"
              }
            ]
          ],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.cloudwatch_agent.data.template_file.agent_config"
          ]
        }
      ]
    },
    {
      "module": "module.cpu_alarm[\"cloudwatch\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "cpu_alarm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "i-0b34854c3b5df8dbb-70",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "CPU alarm for instance i-0b34854c3b5df8dbb \u003e 70%",
            "alarm_name": "CPU-i-0b34854c3b5df8dbb-70",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:CPU-i-0b34854c3b5df8dbb-70",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0b34854c3b5df8dbb"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "CPU-i-0b34854c3b5df8dbb-70",
            "insufficient_data_actions": [],
            "metric_name": "CPUUtilization",
            "metric_query": [],
            "namespace": "AWS/EC2",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 70,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0b34854c3b5df8dbb-80",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "CPU alarm for instance i-0b34854c3b5df8dbb \u003e 80%",
            "alarm_name": "CPU-i-0b34854c3b5df8dbb-80",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:CPU-i-0b34854c3b5df8dbb-80",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0b34854c3b5df8dbb"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "CPU-i-0b34854c3b5df8dbb-80",
            "insufficient_data_actions": [],
            "metric_name": "CPUUtilization",
            "metric_query": [],
            "namespace": "AWS/EC2",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 80,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0b34854c3b5df8dbb-90",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "CPU alarm for instance i-0b34854c3b5df8dbb \u003e 90%",
            "alarm_name": "CPU-i-0b34854c3b5df8dbb-90",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:CPU-i-0b34854c3b5df8dbb-90",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0b34854c3b5df8dbb"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "CPU-i-0b34854c3b5df8dbb-90",
            "insufficient_data_actions": [],
            "metric_name": "CPUUtilization",
            "metric_query": [],
            "namespace": "AWS/EC2",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 90,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.cpu_alarm[\"web1\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "cpu_alarm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "i-0d04ea2c33123ddc7-70",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "CPU alarm for instance i-0d04ea2c33123ddc7 \u003e 70%",
            "alarm_name": "CPU-i-0d04ea2c33123ddc7-70",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:CPU-i-0d04ea2c33123ddc7-70",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0d04ea2c33123ddc7"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "CPU-i-0d04ea2c33123ddc7-70",
            "insufficient_data_actions": [],
            "metric_name": "CPUUtilization",
            "metric_query": [],
            "namespace": "AWS/EC2",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 70,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0d04ea2c33123ddc7-80",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "CPU alarm for instance i-0d04ea2c33123ddc7 \u003e 80%",
            "alarm_name": "CPU-i-0d04ea2c33123ddc7-80",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:CPU-i-0d04ea2c33123ddc7-80",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0d04ea2c33123ddc7"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "CPU-i-0d04ea2c33123ddc7-80",
            "insufficient_data_actions": [],
            "metric_name": "CPUUtilization",
            "metric_query": [],
            "namespace": "AWS/EC2",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 80,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0d04ea2c33123ddc7-90",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "CPU alarm for instance i-0d04ea2c33123ddc7 \u003e 90%",
            "alarm_name": "CPU-i-0d04ea2c33123ddc7-90",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:CPU-i-0d04ea2c33123ddc7-90",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0d04ea2c33123ddc7"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "CPU-i-0d04ea2c33123ddc7-90",
            "insufficient_data_actions": [],
            "metric_name": "CPUUtilization",
            "metric_query": [],
            "namespace": "AWS/EC2",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 90,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.cpu_alarm[\"web2\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "cpu_alarm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "i-0a31b91cafb664f5a-70",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "CPU alarm for instance i-0a31b91cafb664f5a \u003e 70%",
            "alarm_name": "CPU-i-0a31b91cafb664f5a-70",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:CPU-i-0a31b91cafb664f5a-70",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0a31b91cafb664f5a"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "CPU-i-0a31b91cafb664f5a-70",
            "insufficient_data_actions": [],
            "metric_name": "CPUUtilization",
            "metric_query": [],
            "namespace": "AWS/EC2",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 70,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0a31b91cafb664f5a-80",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "CPU alarm for instance i-0a31b91cafb664f5a \u003e 80%",
            "alarm_name": "CPU-i-0a31b91cafb664f5a-80",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:CPU-i-0a31b91cafb664f5a-80",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0a31b91cafb664f5a"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "CPU-i-0a31b91cafb664f5a-80",
            "insufficient_data_actions": [],
            "metric_name": "CPUUtilization",
            "metric_query": [],
            "namespace": "AWS/EC2",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 80,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0a31b91cafb664f5a-90",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "CPU alarm for instance i-0a31b91cafb664f5a \u003e 90%",
            "alarm_name": "CPU-i-0a31b91cafb664f5a-90",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:CPU-i-0a31b91cafb664f5a-90",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0a31b91cafb664f5a"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "CPU-i-0a31b91cafb664f5a-90",
            "insufficient_data_actions": [],
            "metric_name": "CPUUtilization",
            "metric_query": [],
            "namespace": "AWS/EC2",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 90,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.disk_alarms[\"cloudwatch\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "disk_alarms",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "i-0b34854c3b5df8dbb-70",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Disk alarm for instance i-0b34854c3b5df8dbb \u003e 70%",
            "alarm_name": "Disk-i-0b34854c3b5df8dbb-70",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Disk-i-0b34854c3b5df8dbb-70",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0b34854c3b5df8dbb"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Disk-i-0b34854c3b5df8dbb-70",
            "insufficient_data_actions": [],
            "metric_name": "DiskUtilization",
            "metric_query": [],
            "namespace": "System/Linux",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 70,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0b34854c3b5df8dbb-80",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Disk alarm for instance i-0b34854c3b5df8dbb \u003e 80%",
            "alarm_name": "Disk-i-0b34854c3b5df8dbb-80",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Disk-i-0b34854c3b5df8dbb-80",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0b34854c3b5df8dbb"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Disk-i-0b34854c3b5df8dbb-80",
            "insufficient_data_actions": [],
            "metric_name": "DiskUtilization",
            "metric_query": [],
            "namespace": "System/Linux",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 80,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0b34854c3b5df8dbb-90",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Disk alarm for instance i-0b34854c3b5df8dbb \u003e 90%",
            "alarm_name": "Disk-i-0b34854c3b5df8dbb-90",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Disk-i-0b34854c3b5df8dbb-90",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0b34854c3b5df8dbb"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Disk-i-0b34854c3b5df8dbb-90",
            "insufficient_data_actions": [],
            "metric_name": "DiskUtilization",
            "metric_query": [],
            "namespace": "System/Linux",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 90,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.disk_alarms[\"web1\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "disk_alarms",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "i-0d04ea2c33123ddc7-70",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Disk alarm for instance i-0d04ea2c33123ddc7 \u003e 70%",
            "alarm_name": "Disk-i-0d04ea2c33123ddc7-70",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Disk-i-0d04ea2c33123ddc7-70",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0d04ea2c33123ddc7"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Disk-i-0d04ea2c33123ddc7-70",
            "insufficient_data_actions": [],
            "metric_name": "DiskUtilization",
            "metric_query": [],
            "namespace": "System/Linux",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 70,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0d04ea2c33123ddc7-80",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Disk alarm for instance i-0d04ea2c33123ddc7 \u003e 80%",
            "alarm_name": "Disk-i-0d04ea2c33123ddc7-80",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Disk-i-0d04ea2c33123ddc7-80",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0d04ea2c33123ddc7"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Disk-i-0d04ea2c33123ddc7-80",
            "insufficient_data_actions": [],
            "metric_name": "DiskUtilization",
            "metric_query": [],
            "namespace": "System/Linux",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 80,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0d04ea2c33123ddc7-90",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Disk alarm for instance i-0d04ea2c33123ddc7 \u003e 90%",
            "alarm_name": "Disk-i-0d04ea2c33123ddc7-90",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Disk-i-0d04ea2c33123ddc7-90",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0d04ea2c33123ddc7"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Disk-i-0d04ea2c33123ddc7-90",
            "insufficient_data_actions": [],
            "metric_name": "DiskUtilization",
            "metric_query": [],
            "namespace": "System/Linux",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 90,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.disk_alarms[\"web2\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "disk_alarms",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "i-0a31b91cafb664f5a-70",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Disk alarm for instance i-0a31b91cafb664f5a \u003e 70%",
            "alarm_name": "Disk-i-0a31b91cafb664f5a-70",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Disk-i-0a31b91cafb664f5a-70",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0a31b91cafb664f5a"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Disk-i-0a31b91cafb664f5a-70",
            "insufficient_data_actions": [],
            "metric_name": "DiskUtilization",
            "metric_query": [],
            "namespace": "System/Linux",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 70,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0a31b91cafb664f5a-80",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Disk alarm for instance i-0a31b91cafb664f5a \u003e 80%",
            "alarm_name": "Disk-i-0a31b91cafb664f5a-80",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Disk-i-0a31b91cafb664f5a-80",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0a31b91cafb664f5a"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Disk-i-0a31b91cafb664f5a-80",
            "insufficient_data_actions": [],
            "metric_name": "DiskUtilization",
            "metric_query": [],
            "namespace": "System/Linux",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 80,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0a31b91cafb664f5a-90",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Disk alarm for instance i-0a31b91cafb664f5a \u003e 90%",
            "alarm_name": "Disk-i-0a31b91cafb664f5a-90",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Disk-i-0a31b91cafb664f5a-90",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0a31b91cafb664f5a"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Disk-i-0a31b91cafb664f5a-90",
            "insufficient_data_actions": [],
            "metric_name": "DiskUtilization",
            "metric_query": [],
            "namespace": "System/Linux",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 90,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"cloudwatch\"]",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "209479307317",
            "arn": "arn:aws:iam::209479307317:user/sarvesh",
            "id": "209479307317",
            "user_id": "AIDATBRPQSA2TDAFTQIQU"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"cloudwatch\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_event_rule",
      "name": "ec2_events",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "rebooted",
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:ap-south-1:209479307317:rule/cloudwatch-rebooted-rule",
            "description": "Event rule for rebooted (priority: normal) on instance i-0b34854c3b5df8dbb",
            "event_bus_name": "default",
            "event_pattern": "{\"detail\":{\"instance-id\":[\"i-0b34854c3b5df8dbb\"],\"state\":[\"rebooted\"]},\"detail-type\":[\"EC2 Instance State-change Notification\"],\"source\":[\"aws.ec2\"]}",
            "force_destroy": false,
            "id": "cloudwatch-rebooted-rule",
            "is_enabled": true,
            "name": "cloudwatch-rebooted-rule",
            "name_prefix": "",
            "role_arn": "",
            "schedule_expression": "",
            "state": "ENABLED",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "stopped",
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:ap-south-1:209479307317:rule/cloudwatch-stopped-rule",
            "description": "Event rule for stopped (priority: normal) on instance i-0b34854c3b5df8dbb",
            "event_bus_name": "default",
            "event_pattern": "{\"detail\":{\"instance-id\":[\"i-0b34854c3b5df8dbb\"],\"state\":[\"stopped\"]},\"detail-type\":[\"EC2 Instance State-change Notification\"],\"source\":[\"aws.ec2\"]}",
            "force_destroy": false,
            "id": "cloudwatch-stopped-rule",
            "is_enabled": true,
            "name": "cloudwatch-stopped-rule",
            "name_prefix": "",
            "role_arn": "",
            "schedule_expression": "",
            "state": "ENABLED",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "terminated",
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:ap-south-1:209479307317:rule/cloudwatch-terminated-rule",
            "description": "Event rule for terminated (priority: critical) on instance i-0b34854c3b5df8dbb",
            "event_bus_name": "default",
            "event_pattern": "{\"detail\":{\"instance-id\":[\"i-0b34854c3b5df8dbb\"],\"state\":[\"terminated\"]},\"detail-type\":[\"EC2 Instance State-change Notification\"],\"source\":[\"aws.ec2\"]}",
            "force_destroy": false,
            "id": "cloudwatch-terminated-rule",
            "is_enabled": true,
            "name": "cloudwatch-terminated-rule",
            "name_prefix": "",
            "role_arn": "",
            "schedule_expression": "",
            "state": "ENABLED",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"cloudwatch\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_event_target",
      "name": "ec2_target",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "rebooted",
          "schema_version": 1,
          "attributes": {
            "appsync_target": [],
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "force_destroy": false,
            "http_target": [],
            "id": "cloudwatch-rebooted-rule-cloudwatch-rebooted-target",
            "input": "",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "",
            "rule": "cloudwatch-rebooted-rule",
            "run_command_targets": [],
            "sagemaker_pipeline_target": [],
            "sqs_target": [],
            "target_id": "cloudwatch-rebooted-target"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.eventbridge_rules.aws_cloudwatch_event_rule.ec2_events",
            "module.eventbridge_rules.aws_sns_topic.ec2_state_change"
          ]
        },
        {
          "index_key": "stopped",
          "schema_version": 1,
          "attributes": {
            "appsync_target": [],
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "force_destroy": false,
            "http_target": [],
            "id": "cloudwatch-stopped-rule-cloudwatch-stopped-target",
            "input": "",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "",
            "rule": "cloudwatch-stopped-rule",
            "run_command_targets": [],
            "sagemaker_pipeline_target": [],
            "sqs_target": [],
            "target_id": "cloudwatch-stopped-target"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.eventbridge_rules.aws_cloudwatch_event_rule.ec2_events",
            "module.eventbridge_rules.aws_sns_topic.ec2_state_change"
          ]
        },
        {
          "index_key": "terminated",
          "schema_version": 1,
          "attributes": {
            "appsync_target": [],
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "force_destroy": false,
            "http_target": [],
            "id": "cloudwatch-terminated-rule-cloudwatch-terminated-target",
            "input": "",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "",
            "rule": "cloudwatch-terminated-rule",
            "run_command_targets": [],
            "sagemaker_pipeline_target": [],
            "sqs_target": [],
            "target_id": "cloudwatch-terminated-target"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.eventbridge_rules.aws_cloudwatch_event_rule.ec2_events",
            "module.eventbridge_rules.aws_sns_topic.ec2_state_change"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"cloudwatch\"]",
      "mode": "managed",
      "type": "aws_sns_topic",
      "name": "ec2_state_change",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": 0,
            "archive_policy": "",
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "beginning_archive_time": "",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": 0,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": 0,
            "id": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": 0,
            "name": "ec2-state-change-topic",
            "name_prefix": "",
            "owner": "209479307317",
            "policy": "{\"Statement\":[{\"Action\":\"SNS:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"events.amazonaws.com\"},\"Resource\":\"*\",\"Sid\":\"AllowEventBridgeToPublish\"}],\"Version\":\"2012-10-17\"}",
            "signature_version": 0,
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": 0,
            "tags": {},
            "tags_all": {},
            "tracing_config": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"cloudwatch\"]",
      "mode": "managed",
      "type": "aws_sns_topic_subscription",
      "name": "email_sub",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic:7437c52f-0d62-49a2-80ca-b80b2928ccee",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": false,
            "delivery_policy": "",
            "endpoint": "tejal13599@gmail.com",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "filter_policy_scope": "",
            "id": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic:7437c52f-0d62-49a2-80ca-b80b2928ccee",
            "owner_id": "209479307317",
            "pending_confirmation": true,
            "protocol": "email",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "replay_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.eventbridge_rules.aws_sns_topic.ec2_state_change"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"web1\"]",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "209479307317",
            "arn": "arn:aws:iam::209479307317:user/sarvesh",
            "id": "209479307317",
            "user_id": "AIDATBRPQSA2TDAFTQIQU"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"web1\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_event_rule",
      "name": "ec2_events",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "rebooted",
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:ap-south-1:209479307317:rule/web1-rebooted-rule",
            "description": "Event rule for rebooted (priority: normal) on instance i-0d04ea2c33123ddc7",
            "event_bus_name": "default",
            "event_pattern": "{\"detail\":{\"instance-id\":[\"i-0d04ea2c33123ddc7\"],\"state\":[\"rebooted\"]},\"detail-type\":[\"EC2 Instance State-change Notification\"],\"source\":[\"aws.ec2\"]}",
            "force_destroy": false,
            "id": "web1-rebooted-rule",
            "is_enabled": true,
            "name": "web1-rebooted-rule",
            "name_prefix": "",
            "role_arn": "",
            "schedule_expression": "",
            "state": "ENABLED",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "stopped",
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:ap-south-1:209479307317:rule/web1-stopped-rule",
            "description": "Event rule for stopped (priority: normal) on instance i-0d04ea2c33123ddc7",
            "event_bus_name": "default",
            "event_pattern": "{\"detail\":{\"instance-id\":[\"i-0d04ea2c33123ddc7\"],\"state\":[\"stopped\"]},\"detail-type\":[\"EC2 Instance State-change Notification\"],\"source\":[\"aws.ec2\"]}",
            "force_destroy": false,
            "id": "web1-stopped-rule",
            "is_enabled": true,
            "name": "web1-stopped-rule",
            "name_prefix": "",
            "role_arn": "",
            "schedule_expression": "",
            "state": "ENABLED",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "terminated",
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:ap-south-1:209479307317:rule/web1-terminated-rule",
            "description": "Event rule for terminated (priority: critical) on instance i-0d04ea2c33123ddc7",
            "event_bus_name": "default",
            "event_pattern": "{\"detail\":{\"instance-id\":[\"i-0d04ea2c33123ddc7\"],\"state\":[\"terminated\"]},\"detail-type\":[\"EC2 Instance State-change Notification\"],\"source\":[\"aws.ec2\"]}",
            "force_destroy": false,
            "id": "web1-terminated-rule",
            "is_enabled": true,
            "name": "web1-terminated-rule",
            "name_prefix": "",
            "role_arn": "",
            "schedule_expression": "",
            "state": "ENABLED",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"web1\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_event_target",
      "name": "ec2_target",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "rebooted",
          "schema_version": 1,
          "attributes": {
            "appsync_target": [],
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "force_destroy": false,
            "http_target": [],
            "id": "web1-rebooted-rule-web1-rebooted-target",
            "input": "",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "",
            "rule": "web1-rebooted-rule",
            "run_command_targets": [],
            "sagemaker_pipeline_target": [],
            "sqs_target": [],
            "target_id": "web1-rebooted-target"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.eventbridge_rules.aws_cloudwatch_event_rule.ec2_events",
            "module.eventbridge_rules.aws_sns_topic.ec2_state_change"
          ]
        },
        {
          "index_key": "stopped",
          "schema_version": 1,
          "attributes": {
            "appsync_target": [],
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "force_destroy": false,
            "http_target": [],
            "id": "web1-stopped-rule-web1-stopped-target",
            "input": "",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "",
            "rule": "web1-stopped-rule",
            "run_command_targets": [],
            "sagemaker_pipeline_target": [],
            "sqs_target": [],
            "target_id": "web1-stopped-target"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.eventbridge_rules.aws_cloudwatch_event_rule.ec2_events",
            "module.eventbridge_rules.aws_sns_topic.ec2_state_change"
          ]
        },
        {
          "index_key": "terminated",
          "schema_version": 1,
          "attributes": {
            "appsync_target": [],
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "force_destroy": false,
            "http_target": [],
            "id": "web1-terminated-rule-web1-terminated-target",
            "input": "",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "",
            "rule": "web1-terminated-rule",
            "run_command_targets": [],
            "sagemaker_pipeline_target": [],
            "sqs_target": [],
            "target_id": "web1-terminated-target"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.eventbridge_rules.aws_cloudwatch_event_rule.ec2_events",
            "module.eventbridge_rules.aws_sns_topic.ec2_state_change"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"web1\"]",
      "mode": "managed",
      "type": "aws_sns_topic",
      "name": "ec2_state_change",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": 0,
            "archive_policy": "",
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "beginning_archive_time": "",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": 0,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": 0,
            "id": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": 0,
            "name": "ec2-state-change-topic",
            "name_prefix": "",
            "owner": "209479307317",
            "policy": "{\"Statement\":[{\"Action\":\"SNS:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"events.amazonaws.com\"},\"Resource\":\"*\",\"Sid\":\"AllowEventBridgeToPublish\"}],\"Version\":\"2012-10-17\"}",
            "signature_version": 0,
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": 0,
            "tags": {},
            "tags_all": {},
            "tracing_config": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"web1\"]",
      "mode": "managed",
      "type": "aws_sns_topic_subscription",
      "name": "email_sub",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic:7437c52f-0d62-49a2-80ca-b80b2928ccee",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": false,
            "delivery_policy": "",
            "endpoint": "tejal13599@gmail.com",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "filter_policy_scope": "",
            "id": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic:7437c52f-0d62-49a2-80ca-b80b2928ccee",
            "owner_id": "209479307317",
            "pending_confirmation": true,
            "protocol": "email",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "replay_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.eventbridge_rules.aws_sns_topic.ec2_state_change"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"web2\"]",
      "mode": "data",
      "type": "aws_caller_identity",
      "name": "current",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "account_id": "209479307317",
            "arn": "arn:aws:iam::209479307317:user/sarvesh",
            "id": "209479307317",
            "user_id": "AIDATBRPQSA2TDAFTQIQU"
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"web2\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_event_rule",
      "name": "ec2_events",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "rebooted",
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:ap-south-1:209479307317:rule/web2-rebooted-rule",
            "description": "Event rule for rebooted (priority: normal) on instance i-0a31b91cafb664f5a",
            "event_bus_name": "default",
            "event_pattern": "{\"detail\":{\"instance-id\":[\"i-0a31b91cafb664f5a\"],\"state\":[\"rebooted\"]},\"detail-type\":[\"EC2 Instance State-change Notification\"],\"source\":[\"aws.ec2\"]}",
            "force_destroy": false,
            "id": "web2-rebooted-rule",
            "is_enabled": true,
            "name": "web2-rebooted-rule",
            "name_prefix": "",
            "role_arn": "",
            "schedule_expression": "",
            "state": "ENABLED",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "stopped",
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:ap-south-1:209479307317:rule/web2-stopped-rule",
            "description": "Event rule for stopped (priority: normal) on instance i-0a31b91cafb664f5a",
            "event_bus_name": "default",
            "event_pattern": "{\"detail\":{\"instance-id\":[\"i-0a31b91cafb664f5a\"],\"state\":[\"stopped\"]},\"detail-type\":[\"EC2 Instance State-change Notification\"],\"source\":[\"aws.ec2\"]}",
            "force_destroy": false,
            "id": "web2-stopped-rule",
            "is_enabled": true,
            "name": "web2-stopped-rule",
            "name_prefix": "",
            "role_arn": "",
            "schedule_expression": "",
            "state": "ENABLED",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "terminated",
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:events:ap-south-1:209479307317:rule/web2-terminated-rule",
            "description": "Event rule for terminated (priority: critical) on instance i-0a31b91cafb664f5a",
            "event_bus_name": "default",
            "event_pattern": "{\"detail\":{\"instance-id\":[\"i-0a31b91cafb664f5a\"],\"state\":[\"terminated\"]},\"detail-type\":[\"EC2 Instance State-change Notification\"],\"source\":[\"aws.ec2\"]}",
            "force_destroy": false,
            "id": "web2-terminated-rule",
            "is_enabled": true,
            "name": "web2-terminated-rule",
            "name_prefix": "",
            "role_arn": "",
            "schedule_expression": "",
            "state": "ENABLED",
            "tags": {},
            "tags_all": {}
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"web2\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_event_target",
      "name": "ec2_target",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "rebooted",
          "schema_version": 1,
          "attributes": {
            "appsync_target": [],
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "force_destroy": false,
            "http_target": [],
            "id": "web2-rebooted-rule-web2-rebooted-target",
            "input": "",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "",
            "rule": "web2-rebooted-rule",
            "run_command_targets": [],
            "sagemaker_pipeline_target": [],
            "sqs_target": [],
            "target_id": "web2-rebooted-target"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.eventbridge_rules.aws_cloudwatch_event_rule.ec2_events",
            "module.eventbridge_rules.aws_sns_topic.ec2_state_change"
          ]
        },
        {
          "index_key": "stopped",
          "schema_version": 1,
          "attributes": {
            "appsync_target": [],
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "force_destroy": false,
            "http_target": [],
            "id": "web2-stopped-rule-web2-stopped-target",
            "input": "",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "",
            "rule": "web2-stopped-rule",
            "run_command_targets": [],
            "sagemaker_pipeline_target": [],
            "sqs_target": [],
            "target_id": "web2-stopped-target"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.eventbridge_rules.aws_cloudwatch_event_rule.ec2_events",
            "module.eventbridge_rules.aws_sns_topic.ec2_state_change"
          ]
        },
        {
          "index_key": "terminated",
          "schema_version": 1,
          "attributes": {
            "appsync_target": [],
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "batch_target": [],
            "dead_letter_config": [],
            "ecs_target": [],
            "event_bus_name": "default",
            "force_destroy": false,
            "http_target": [],
            "id": "web2-terminated-rule-web2-terminated-target",
            "input": "",
            "input_path": "",
            "input_transformer": [],
            "kinesis_target": [],
            "redshift_target": [],
            "retry_policy": [],
            "role_arn": "",
            "rule": "web2-terminated-rule",
            "run_command_targets": [],
            "sagemaker_pipeline_target": [],
            "sqs_target": [],
            "target_id": "web2-terminated-target"
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.eventbridge_rules.aws_cloudwatch_event_rule.ec2_events",
            "module.eventbridge_rules.aws_sns_topic.ec2_state_change"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"web2\"]",
      "mode": "managed",
      "type": "aws_sns_topic",
      "name": "ec2_state_change",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": 0,
            "archive_policy": "",
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "beginning_archive_time": "",
            "content_based_deduplication": false,
            "delivery_policy": "",
            "display_name": "",
            "fifo_topic": false,
            "firehose_failure_feedback_role_arn": "",
            "firehose_success_feedback_role_arn": "",
            "firehose_success_feedback_sample_rate": 0,
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": 0,
            "id": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": 0,
            "name": "ec2-state-change-topic",
            "name_prefix": "",
            "owner": "209479307317",
            "policy": "{\"Statement\":[{\"Action\":\"SNS:Publish\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"events.amazonaws.com\"},\"Resource\":\"*\",\"Sid\":\"AllowEventBridgeToPublish\"}],\"Version\":\"2012-10-17\"}",
            "signature_version": 0,
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": 0,
            "tags": {},
            "tags_all": {},
            "tracing_config": ""
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.eventbridge_rules[\"web2\"]",
      "mode": "managed",
      "type": "aws_sns_topic_subscription",
      "name": "email_sub",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic:7437c52f-0d62-49a2-80ca-b80b2928ccee",
            "confirmation_timeout_in_minutes": 1,
            "confirmation_was_authenticated": false,
            "delivery_policy": "",
            "endpoint": "tejal13599@gmail.com",
            "endpoint_auto_confirms": false,
            "filter_policy": "",
            "filter_policy_scope": "",
            "id": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic:7437c52f-0d62-49a2-80ca-b80b2928ccee",
            "owner_id": "209479307317",
            "pending_confirmation": true,
            "protocol": "email",
            "raw_message_delivery": false,
            "redrive_policy": "",
            "replay_policy": "",
            "subscription_role_arn": "",
            "topic_arn": "arn:aws:sns:ap-south-1:209479307317:ec2-state-change-topic"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected",
            "module.eventbridge_rules.aws_sns_topic.ec2_state_change"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_instance_profile",
      "name": "profile",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::209479307317:instance-profile/cw-ssm-role-new",
            "create_date": "2025-05-09T04:28:53Z",
            "id": "cw-ssm-role-new",
            "name": "cw-ssm-role-new",
            "name_prefix": "",
            "path": "/",
            "role": "cw-ssm-role-new",
            "tags": {},
            "tags_all": {},
            "unique_id": "AIPATBRPQSA263K4T6VRC"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.cw_ssm_role"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role",
      "name": "cw_ssm_role",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:iam::209479307317:role/cw-ssm-role-new",
            "assume_role_policy": "{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}",
            "create_date": "2025-05-08T09:17:22Z",
            "description": "",
            "force_detach_policies": false,
            "id": "cw-ssm-role-new",
            "inline_policy": [],
            "managed_policy_arns": [
              "arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore",
              "arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy"
            ],
            "max_session_duration": 3600,
            "name": "cw-ssm-role-new",
            "name_prefix": "",
            "path": "/",
            "permissions_boundary": "",
            "tags": {},
            "tags_all": {},
            "unique_id": "AROATBRPQSA2QYWRA62QD"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "cloudwatch_agent",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "cw-ssm-role-new-20250508091724358900000002",
            "policy_arn": "arn:aws:iam::aws:policy/CloudWatchAgentServerPolicy",
            "role": "cw-ssm-role-new"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.cw_ssm_role"
          ]
        }
      ]
    },
    {
      "module": "module.iam",
      "mode": "managed",
      "type": "aws_iam_role_policy_attachment",
      "name": "ssm_managed_instance_core",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "cw-ssm-role-new-20250508091724093300000001",
            "policy_arn": "arn:aws:iam::aws:policy/AmazonSSMManagedInstanceCore",
            "role": "cw-ssm-role-new"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.iam.aws_iam_role.cw_ssm_role"
          ]
        }
      ]
    },
    {
      "module": "module.memory_alarms[\"cloudwatch\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "memory_alarm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "i-0b34854c3b5df8dbb-70",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Memory alarm for instance i-0b34854c3b5df8dbb \u003e 70%",
            "alarm_name": "Memory-i-0b34854c3b5df8dbb-70",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Memory-i-0b34854c3b5df8dbb-70",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0b34854c3b5df8dbb"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Memory-i-0b34854c3b5df8dbb-70",
            "insufficient_data_actions": [],
            "metric_name": "mem_used_percent",
            "metric_query": [],
            "namespace": "CWAgent",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 70,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0b34854c3b5df8dbb-80",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Memory alarm for instance i-0b34854c3b5df8dbb \u003e 80%",
            "alarm_name": "Memory-i-0b34854c3b5df8dbb-80",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Memory-i-0b34854c3b5df8dbb-80",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0b34854c3b5df8dbb"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Memory-i-0b34854c3b5df8dbb-80",
            "insufficient_data_actions": [],
            "metric_name": "mem_used_percent",
            "metric_query": [],
            "namespace": "CWAgent",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 80,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0b34854c3b5df8dbb-90",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Memory alarm for instance i-0b34854c3b5df8dbb \u003e 90%",
            "alarm_name": "Memory-i-0b34854c3b5df8dbb-90",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Memory-i-0b34854c3b5df8dbb-90",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0b34854c3b5df8dbb"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Memory-i-0b34854c3b5df8dbb-90",
            "insufficient_data_actions": [],
            "metric_name": "mem_used_percent",
            "metric_query": [],
            "namespace": "CWAgent",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 90,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.memory_alarms[\"web1\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "memory_alarm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "i-0d04ea2c33123ddc7-70",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Memory alarm for instance i-0d04ea2c33123ddc7 \u003e 70%",
            "alarm_name": "Memory-i-0d04ea2c33123ddc7-70",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Memory-i-0d04ea2c33123ddc7-70",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0d04ea2c33123ddc7"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Memory-i-0d04ea2c33123ddc7-70",
            "insufficient_data_actions": [],
            "metric_name": "mem_used_percent",
            "metric_query": [],
            "namespace": "CWAgent",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 70,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0d04ea2c33123ddc7-80",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Memory alarm for instance i-0d04ea2c33123ddc7 \u003e 80%",
            "alarm_name": "Memory-i-0d04ea2c33123ddc7-80",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Memory-i-0d04ea2c33123ddc7-80",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0d04ea2c33123ddc7"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Memory-i-0d04ea2c33123ddc7-80",
            "insufficient_data_actions": [],
            "metric_name": "mem_used_percent",
            "metric_query": [],
            "namespace": "CWAgent",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 80,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0d04ea2c33123ddc7-90",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Memory alarm for instance i-0d04ea2c33123ddc7 \u003e 90%",
            "alarm_name": "Memory-i-0d04ea2c33123ddc7-90",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Memory-i-0d04ea2c33123ddc7-90",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0d04ea2c33123ddc7"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Memory-i-0d04ea2c33123ddc7-90",
            "insufficient_data_actions": [],
            "metric_name": "mem_used_percent",
            "metric_query": [],
            "namespace": "CWAgent",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 90,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    },
    {
      "module": "module.memory_alarms[\"web2\"]",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "memory_alarm",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": "i-0a31b91cafb664f5a-70",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Memory alarm for instance i-0a31b91cafb664f5a \u003e 70%",
            "alarm_name": "Memory-i-0a31b91cafb664f5a-70",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Memory-i-0a31b91cafb664f5a-70",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0a31b91cafb664f5a"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Memory-i-0a31b91cafb664f5a-70",
            "insufficient_data_actions": [],
            "metric_name": "mem_used_percent",
            "metric_query": [],
            "namespace": "CWAgent",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 70,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0a31b91cafb664f5a-80",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Memory alarm for instance i-0a31b91cafb664f5a \u003e 80%",
            "alarm_name": "Memory-i-0a31b91cafb664f5a-80",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Memory-i-0a31b91cafb664f5a-80",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0a31b91cafb664f5a"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Memory-i-0a31b91cafb664f5a-80",
            "insufficient_data_actions": [],
            "metric_name": "mem_used_percent",
            "metric_query": [],
            "namespace": "CWAgent",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 80,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        },
        {
          "index_key": "i-0a31b91cafb664f5a-90",
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [],
            "alarm_description": "Memory alarm for instance i-0a31b91cafb664f5a \u003e 90%",
            "alarm_name": "Memory-i-0a31b91cafb664f5a-90",
            "arn": "arn:aws:cloudwatch:ap-south-1:209479307317:alarm:Memory-i-0a31b91cafb664f5a-90",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "InstanceId": "i-0a31b91cafb664f5a"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Memory-i-0a31b91cafb664f5a-90",
            "insufficient_data_actions": [],
            "metric_name": "mem_used_percent",
            "metric_query": [],
            "namespace": "CWAgent",
            "ok_actions": [],
            "period": 300,
            "statistic": "Average",
            "tags": {},
            "tags_all": {},
            "threshold": 90,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "data.aws_instance.selected",
            "data.aws_instances.selected"
          ]
        }
      ]
    }
  ],
  "check_results": null
}
